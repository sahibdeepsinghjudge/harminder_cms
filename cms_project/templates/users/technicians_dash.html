{% extends 'home/base.html' %}

{% block content %}
<div class="container mt-3">
    <h4 class="mx-2">New Provisionings</h4>
    <!-- <div class="container">
        <form action="{% url 'search_user' %}" method="post">
            {% csrf_token %}
            <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="Search" name="number" aria-label="Search" aria-describedby="button-addon2">
                <input type="hidden" name="start_complaint" value="False">
                <input type="hidden" name="user_search" value="True">
                <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Search</button>
            </div>
        </form>
    </div> -->
    <div class="row w-75">

            <div class="col stats">
                <p>{{technicians.count}} </p>
                <h6>Technicians</h6>

            </div>
            <div class="col stats">
                <p> {{complaints.count}} </p>
                <h6>Complaints</h6>
            </div>
            <div class="col stats">
                <p> {{connections.count}} </p>
                <h6>Provisionings</h6>
            </div>
    </div>

    <div class="d-flex ">
        <a href="{%  url 'create-technician' %}"><button class="btn btn-primary ">Add New Technician</button></a>
    </div>

    <h4>Technicians</h4>
    <table class="custom-table">
        <thead>
            <tr>
                <th>Technician Name</th>
                <th>Phone</th>
                <th>Complaints Assigned</th>
                <th>Complaints Overdue</th>
                <th>Provisionings</th>
            </tr>
        </thead>
        <tbody>
    {% for technician in technicians %}
            <tr>
                <td>{{ technician.user.username }}</td>
                <td>{{ technician.phone }}</td>
                <td>{{ technician.get_complaints.count }}</td>
                <td>{{ technician.over_due_complaints.count }}</td>
                <td>{{ technician.provisioned_requests.count }}</td>
            </tr>
    {% endfor %}

        </tbody>
    </table>
    <style>
        .custom-table {
            width: 100%;
            margin-bottom: 1rem;
            color: #212529;
            border-collapse: collapse;
        }

        .custom-table th,
        .custom-table td {
            padding: 0.75rem;
            vertical-align: top;
            border-top: 1px solid #dee2e6;
        }

        .custom-table thead  {
            vertical-align: bottom;
            border-bottom: 2px solid #dee2e6;
            background-color: #DBE2EF !important;
            color: #3F72AF !important;
            border-radius: 0.25rem;
        }

        .custom-table tbody + tbody {
            border-top: 2px solid #dee2e6;
        }

        .custom-table tbody tr:nth-of-type(odd) {
            background-color: rgba(0, 0, 0, 0.05);
        }

        .custom-table tbody tr:hover {
            background-color: rgba(0, 0, 0, 0.075);
        }
    </style>

</div>

{% endblock %}
